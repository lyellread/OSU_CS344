#!/usr/bin/bash

# $1 is the command to execute, on { dims transpose mean add multiply}
# $2..3 are matricies that will be passed as arguments.

function dimensions {

	#matrix dims [MATRIX]
	#Prints error message to stderr, nothing to stdout and return value != 0 if:
	#	Argument count is greater than 1 (e.g. `matrix dims m1 m2`).
	#	Argument count is 1 but the file named by argument 1 is not readable (e.g. `matrix dims no_such_file`).
	#Otherwise, prints "ROWS COLS" (Space separated!) to stdout, nothing to stderr, and returns 0.

	#Check file is openable. Print to stderr: https://stackoverflow.com/questions/2990414/echo-that-outputs-to-stderr
	if [ -f $filename ]
	then
		#Rows will be calculated by the number of lines in the file...
		#Using the "<" stdin redirect, there is no filename. https://stackoverflow.com/questions/10238363/how-to-get-wc-l-to-print-just-the-number-of-lines-without-file-name
		rows=$(wc -l < $filename)
		words=$(wc -w < $filename)

		#Cols is the number of total words / the number of rows... because words = rows * cols.
		cols=$((words/rows))

		printf "$rows $cols\n"
		exit 0

	else
		>&2 echo "Error opening file. Exiting."
		exit 2
		
	fi


	

}


function transpose {

	#matrix transpose [MATRIX]
	#Prints error message to stderr, nothing to stdout and return value != 0 if:
	#	Argument count is greater than 1 (e.g. `matrix transpose m1 m2`).
	#	Argument count is 1 but the file named by argument 1 is not readable (e.g. `matrix transpose no_such_file`).
	#Otherwise, prints the transpose of the input, in a valid matrix format to stdout, nothing to stderr, and returns 0.

	echo "Placeholder"
}


function mean {

	#matrix mean [MATRIX]
	#Prints error message to stderr, nothing to stdout and return value != 0 if:
	#	Argument count is greater than 1 (e.g. `matrix mean m1 m2`).
	#	Argument count is 1 but the file named by argument 1 is not readable (e.g. `matrix mean no_such_file`).
	#Otherwise, prints a row vector mean of the input matrix, in a valid matrix format to stdout, nothing to stderr, and returns 0. All values must round to the nearest integer, with ***.5 values rounded away from zero.

	echo "Placeholder"
}


function add {

	#matrix add MATRIX_LEFT MATRIX_RIGHT
	#Prints error message to stderr, nothing to stdout and return value != 0 if:
	#	Argument count does not equal 2 (e.g. `matrix add m1 m2 m3` or `matrix add m1`).
	#	Argument count is 2 but the file named by either argument is not readable (e.g. `matrix add m1 no_such_file`).
	#	The dimensions of the input matrices do not allow them to be added together following the rules of matrix addition.
	#Otherwise, prints the sum of both matrices, in a valid matrix format to stdout, nothing to stderr, and returns 0.
	echo "Placeholder"


}


function multiply {

	#matrix multiply MATRIX_LEFT MATRIX_RIGHT
	#Prints error message to stderr, nothing to stdout and return value != 0 if:
	#	Argument count does not equal 2 (e.g. `matrix multiply m1 m2 m3` or `matrix multiply m1`).
	#	Argument count is 2 but the file named by either argument is not readable (e.g. `matrix multiply m1 no_such_file`).
	#	The dimensions of the input matrices do not allow them to be multiplied together following the rules of matrix multiplication.
	#Otherwise, prints the product of both matrices, with the first argument as the left matrix and the second argument as the right matrix, in a valid matrix format to stdout, nothing to stderr, and returns 0. (`matrix multiply A B` should return A*B, not B*A)
	echo "Placeholder"


}




if [ "$#" -eq 2 ] && [ "$1" = "dims" ]
then

	echo "Dimensions with $1, $2"
	filename=$2
	dimensions


elif [ "$#" -eq 2 ] && [ "$1" = "transpose" ]
then

	echo "Transpose with $1, $2"


elif [ "$#" -eq 2 ] && [ "$1" = "mean" ]
then

	echo "Mean with $1, $2"


elif [ "$#" -eq 3 ] && [ "$1" = "add" ]
then

	echo "Add with $1, $2, $3"


elif [ "$#" -eq 3 ] && [ "$1" = "multiply" ]
then

	echo "multiply with $1, $2, $3"

else

	exit 1

fi

echo "Complete"